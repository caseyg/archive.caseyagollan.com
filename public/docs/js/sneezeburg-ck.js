/* S N E E Z E B U R G .js | 06.15.12 | Casey A. Gollan */// SETUP CANVAS
<<<<<<< HEAD
function thirty_pc(){var e=$(window).height(),t=e;t=parseInt(t)/2+"px";$("header").css("background-size","auto "+e+"px");$("header").css("height",e-50)}function makeSlug(e){e=e.toLowerCase();var t={a:/\u00e1/g,e:/u00e9/g,i:/\u00ed/g,o:/\u00f3/g,u:/\u00fa/g,n:/\u00f1/g};for(var n in t)e=e.replace(t[n],n);var r=e.replace(/\s/g,"-"),i=r.replace(/[^a-zA-Z0-9\-]/g,"");i=i.toLowerCase();return i}function eliminateDuplicates(e){var t,n=e.length,r=[],i={};for(t=0;t<n;t++)i[e[t]]=0;for(t in i)r.push(t);return r}function SortByName(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}function erase(){$(".number").remove();canvas.width=$(document).width();canvas.height=$(document).height()}function drawLines(e,t){erase();$("#canvas").show();$("body").find("."+e).addClass("highlight");var n=[];$(".project."+e).each(function(){var e=$(this).offset().left+$(this).width()/2,t=$(this).offset().top+$(this).height()/2,r=$(this).offset().left+140,i=$(this).offset().top+30;n.push({id:$(this).attr("id"),left:r,top:i})});var r=1;ctx.beginPath();ctx.moveTo(n[0].left,n[0].top);$.each(n,function(e){ctx.quadraticCurveTo(n[e].left-100,n[e].top-100,n[e].left,n[e].top);e++});ctx.strokeStyle="blue";ctx.lineWidth=5;ctx.stroke();console.log(n.length);t==1&&$(".number").remove();var i=n.length;$.each(n,function(e){ctx.strokeStyle="blue";ctx.fillStyle="blue";ctx.lineWidth=5;ctx.beginPath();ctx.arc(n[e].left,n[e].top,10,0,Math.PI*2,!0);ctx.closePath();ctx.fill();ctx.stroke();t==1&&$("#"+n[e].id).append("<p class='number'>"+(n.length-e)+"</p>");e++})}function drawFromSelect(){var e=$("#tag-select").select2("val"),t=$("#content nav#filters").height()+20;$("#overlay").css({width:$(window).width(),height:$(window).height()}).show();$("#canvas").css("opacity","1");$("*").removeClass("highlight").removeClass("double-highlight");drawLines(e,!0);$("body").find("."+e).addClass("double-highlight");$(document.body).animate({scrollTop:$("."+e).offset().top-t},500,"easeOutExpo")}var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");$(document).ready(function(){thirty_pc();$(window).bind("resize",thirty_pc)});$(".project ul.tags").each(function(){var e=$(this),t=$(this).text(),n=new Array,n=$.map(t.split(","),$.trim);e.html("<ul class='tags'></ul>");$.each(n,function(t,n){e.append("<li class='"+makeSlug(n)+"'>"+n+"</li>");e.parent().addClass(makeSlug(n))})});var tagOutput=$("#tag-list").text();$("#tag-list").remove();var tags=new Array,tags=$.map(tagOutput.split(","),$.trim);tags.sort(SortByName);var tags=eliminateDuplicates(tags);tags.splice(0,1);$.each(tags,function(e,t){$("body select").append($("<option value='"+makeSlug(t)+"'>"+t+"</option>"))});$("#tag-select").select2({placeholder:"Select a State"});var $container=$("#projects"),filterSet=":not(.rye-high-school, .risd-pre-college, .oxbow-school, .smfa-pre-college)";$($container).imagesLoaded(function(e,t,n){$($container).isotope({itemSelector:".project",animationEngine:"best-available",getSortData:{name:function(e){return e.find("h2 a").text()}},onLayout:function(){if($("*").hasClass("double-highlight")){erase();$("#overlay").css({width:$(window).width(),height:$(window).height()});drawLines(content,!0)}}})});$("#options #layout-mode a[data-option-value=masonry]").click(function(){$("#projects").addClass("grid").removeClass("list")});$("#options #layout-mode a[data-option-value=straightDown]").click(function(){$("#projects").addClass("list").removeClass("grid")});var $optionSets=$("#options"),$optionLinks=$optionSets.find("a");$optionLinks.click(function(){var e=$(this);if(e.hasClass("selected")&&e.hasClass("toggle")){if(e.hasClass("sort-descending")){$($container).isotope({sortAscending:!0});e.removeClass("sort-descending").addClass("sort-ascending");return!1}$($container).isotope({sortAscending:!1});e.removeClass("sort-ascending").addClass("sort-descending");return!1}var t=e.parents(".option-set");t.find(".selected").removeClass("selected");t.find(".sort-descending").removeClass("sort-descending");t.find(".sort-ascending").removeClass("sort-ascending");e.addClass("selected");e.hasClass("toggle")&&e.addClass("sort-ascending");var n={sortAscending:"true"},r=t.attr("data-option-key"),i=e.attr("data-option-value");i=i==="false"?!1:i;n[r]=i;r==="layoutMode"&&typeof changeLayoutMode=="function"?changeLayoutMode(e,n):$container.isotope(n);return!1});$("#content nav#filters").waypoint(function(e,t){if(t==="down"){$(this).css("position","fixed");$("#content").css("padding-top",$("#content nav#filters").height())}else{$(this).css("position","relative");$("#content").css("padding-top","0")}});$(".project").tooltip({selector:"a[rel=tooltip]"});$("body").append("<div id='overlay' style='display:none;'></div>");$(".tags li").hover(function(){var e=makeSlug($(this).text());$(this).parent().parent().hasClass("double-highlight")?$(".tags").find("."+e).addClass("highlight"):drawLines(e)},function(){var e=makeSlug($(this).text());if(!$(this).parent().parent().hasClass("double-highlight")){$("*").removeClass("highlight").removeClass("double-highlight");erase();$("#canvas").hide()}else $(".tags").find("."+e).removeClass("highlight")});$("#overlay, #canvas").click(function(){$("#overlay").hide();$("#canvas").css("opacity",".5").hide();$("*").removeClass("highlight").removeClass("double-highlight");erase();$("#tag-select").select2("val","")});$(".project ul li").click(function(){if($(this).parent().parent().hasClass("double-highlight"))if(!$(this).hasClass("double-highlight")){$("*").removeClass("highlight").removeClass("double-highlight");content=makeSlug($(this).text());$("#overlay").css({width:$(window).width(),height:$(window).height()}).show();$("#canvas").css("opacity","1");drawLines(content,!0);$("body").find("."+content).addClass("double-highlight");$("#tag-select").select2("val",content)}else{$(".number").remove();$("#overlay").hide();$("#canvas").css("opacity",".5");$("*").removeClass("double-highlight");$("#tag-select").select2("val","")}else{content=makeSlug($(this).text());$("#overlay").css({width:$(window).width(),height:$(window).height()}).show();$("#canvas").css("opacity","1");drawLines(content,!0);$("body").find("."+content).addClass("double-highlight");$("#tag-select").select2("val",content)}});$("#tag-select").bind("change",drawFromSelect);
=======
function makeSlug(e){e=e.toLowerCase();var t={a:/\u00e1/g,e:/u00e9/g,i:/\u00ed/g,o:/\u00f3/g,u:/\u00fa/g,n:/\u00f1/g};for(var n in t)e=e.replace(t[n],n);var r=e.replace(/\s/g,"-"),i=r.replace(/[^a-zA-Z0-9\-]/g,"");i=i.toLowerCase();return i}function eliminateDuplicates(e){var t,n=e.length,r=[],i={};for(t=0;t<n;t++)i[e[t]]=0;for(t in i)r.push(t);return r}function SortByName(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0}function erase(){$(".number").remove();canvas.width=$(document).width();canvas.height=$(document).height()}function drawLines(e,t){erase();$("#canvas").show();$("body").find("."+e).addClass("highlight");var n=[];$(".project."+e).each(function(){var e=$(this).offset().left+$(this).width()/2,t=$(this).offset().top+$(this).height()/2,r=$(this).offset().left+140,i=$(this).offset().top+30;n.push({id:$(this).attr("id"),left:r,top:i})});var r=1;ctx.beginPath();ctx.moveTo(n[0].left,n[0].top);$.each(n,function(e){ctx.quadraticCurveTo(n[e].left-100,n[e].top-100,n[e].left,n[e].top);e++});ctx.strokeStyle="blue";ctx.lineWidth=5;ctx.stroke();console.log(n.length);t==1&&$(".number").remove();var i=n.length;$.each(n,function(e){ctx.strokeStyle="blue";ctx.fillStyle="blue";ctx.lineWidth=5;ctx.beginPath();ctx.arc(n[e].left,n[e].top,10,0,Math.PI*2,!0);ctx.closePath();ctx.fill();ctx.stroke();t==1&&$("#"+n[e].id).append("<p class='number'>"+(n.length-e)+"</p>");e++})}function drawFromSelect(){var e=$("#tag-select").select2("val"),t=$("nav#filters").height()+20;$("#overlay").css({width:$(window).width(),height:$(window).height()}).show();$("#canvas").css("opacity","1");$("*").removeClass("highlight").removeClass("double-highlight");drawLines(e,!0);$("body").find("."+e).addClass("double-highlight");$(document.body).animate({scrollTop:$("."+e).offset().top-t},500,"easeOutExpo")}var canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");$(".project ul.tags").each(function(){var e=$(this),t=$(this).text(),n=new Array,n=$.map(t.split(","),$.trim);e.html("<ul class='tags'></ul>");$.each(n,function(t,n){e.append("<li class='"+makeSlug(n)+"'>"+n+"</li>");e.parent().addClass(makeSlug(n))})});var tagOutput=$("#tag-list").text();$("#tag-list").remove();var tags=new Array,tags=$.map(tagOutput.split(","),$.trim);tags.sort(SortByName);var tags=eliminateDuplicates(tags);tags.splice(0,1);$.each(tags,function(e,t){$("body select").append($("<option value='"+makeSlug(t)+"'>"+t+"</option>"))});$("#tag-select").select2({placeholder:"Select a State"});var $container=$("#projects>ul"),filterSet=":not(.rye-high-school, .risd-pre-college, .oxbow-school, .smfa-pre-college)";$($container).imagesLoaded(function(e,t,n){$($container).isotope({itemSelector:".project",animationEngine:"best-available",getSortData:{name:function(e){return e.find("h2 a").text()}},onLayout:function(){if($("*").hasClass("double-highlight")){erase();$("#overlay").css({width:$(window).width(),height:$(window).height()});drawLines(content,!0)}}})});$("#options #layout-mode a[data-option-value=masonry]").click(function(){$("#projects>ul").addClass("grid").removeClass("list")});$("#options #layout-mode a[data-option-value=straightDown]").click(function(){$("#projects>ul").addClass("list").removeClass("grid")});var $optionSets=$("#options"),$optionLinks=$optionSets.find("a");$optionLinks.click(function(){var e=$(this);if(e.hasClass("selected")&&e.hasClass("toggle")){if(e.hasClass("sort-descending")){$($container).isotope({sortAscending:!0});e.removeClass("sort-descending").addClass("sort-ascending");return!1}$($container).isotope({sortAscending:!1});e.removeClass("sort-ascending").addClass("sort-descending");return!1}var t=e.parents(".option-set");t.find(".selected").removeClass("selected");t.find(".sort-descending").removeClass("sort-descending");t.find(".sort-ascending").removeClass("sort-ascending");e.addClass("selected");e.hasClass("toggle")&&e.addClass("sort-ascending");var n={sortAscending:"true"},r=t.attr("data-option-key"),i=e.attr("data-option-value");i=i==="false"?!1:i;n[r]=i;r==="layoutMode"&&typeof changeLayoutMode=="function"?changeLayoutMode(e,n):$container.isotope(n);return!1});$("nav#main").waypoint(function(e,t){if(t==="down"){$("nav#main li:nth-child(1) a").removeClass("active");$("nav#main li:nth-child(2) a").addClass("active")}else{$("nav#main li:nth-child(1) a").addClass("active");$("nav#main li:nth-child(2) a").removeClass("active")}});$("nav#filters").waypoint(function(e,t){if(t==="down"){$(this).css("position","fixed");$("#projects>ul").css("margin-top",$("#content nav#filters").height()+50)}else{$(this).css("position","relative");$("#projects>ul").css("margin-top","0")}});$(".project").tooltip({selector:"a[rel=tooltip]"});$("body").append("<div id='overlay' style='display:none;'></div>");$(".tags li").hover(function(){var e=makeSlug($(this).text());$(this).parent().parent().hasClass("double-highlight")?$(".tags").find("."+e).addClass("highlight"):drawLines(e)},function(){var e=makeSlug($(this).text());if(!$(this).parent().parent().hasClass("double-highlight")){$("*").removeClass("highlight").removeClass("double-highlight");erase();$("#canvas").hide()}else $(".tags").find("."+e).removeClass("highlight")});$("#overlay, #canvas").click(function(){$("#overlay").hide();$("#canvas").css("opacity",".5").hide();$("*").removeClass("highlight").removeClass("double-highlight");erase();$("#tag-select").select2("val","")});$(".project ul li").click(function(){if($(this).parent().parent().hasClass("double-highlight"))if(!$(this).hasClass("double-highlight")){$("*").removeClass("highlight").removeClass("double-highlight");content=makeSlug($(this).text());$("#overlay").css({width:$(window).width(),height:$(window).height()}).show();$("#canvas").css("opacity","1");drawLines(content,!0);$("body").find("."+content).addClass("double-highlight");$("#tag-select").select2("val",content)}else{$(".number").remove();$("#overlay").hide();$("#canvas").css("opacity",".5");$("*").removeClass("double-highlight");$("#tag-select").select2("val","")}else{content=makeSlug($(this).text());$("#overlay").css({width:$(window).width(),height:$(window).height()}).show();$("#canvas").css("opacity","1");drawLines(content,!0);$("body").find("."+content).addClass("double-highlight");$("#tag-select").select2("val",content)}});$("#tag-select").bind("change",drawFromSelect);
>>>>>>> homepage
